SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

DROP SCHEMA IF EXISTS VirtualQueue;
CREATE SCHEMA VirtualQueue;
USE VirtualQueue;


/****** Object:  Table `Activity`******/

CREATE TABLE Activity(
	 Id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
	 first_name VARCHAR(50) NOT NULL,
     last_name VARCHAR(50) NOT NULL,
	 About  VARCHAR(500)  NULL,
	 /*LocationInVenue `geometry` NULL,*/
	 TimePerEvent DATETIME NOT NULL,
	 EntryTime DATETIME NOT NULL,
	 ExitTime DATETIME NOT NULL,
	 MaxGuestsPerEvent  SMALLINT UNSIGNED NOT NULL,
	 MaxConcurrentEvents SMALLINT UNSIGNED NOT NULL,
	 MinAge SMALLINT UNSIGNED NULL,
	 MinHeight SMALLINT UNSIGNED NULL,
	 MaxHeight SMALLINT UNSIGNED NULL,
	 MinWeight SMALLINT UNSIGNED NULL,
	 MaxWeight SMALLINT UNSIGNED NULL,
	 OtherRestrictions VARCHAR(1000)  NULL,
	 Disclaimer VARCHAR(1000)  NULL,
	 Waiver VARCHAR(1000)  NULL,
	 MaxWaitTime DATETIME  NULL,
	 RestrictionGroup SMALLINT UNSIGNED NULL,
	 ScheduleGroup SMALLINT UNSIGNED NULL,
 CONSTRAINT PK_Activity PRIMARY KEY (Id)
/*WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, 
IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)*/
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


/****** Object:  Table `Patron` ******/
CREATE TABLE Patron(
	Id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
	VenueId SMALLINT UNSIGNED NOT NULL,
	Pname VARCHAR(50) NOT NULL,
	MarketingContactInfoTBD VARCHAR(1000)  NULL,
 CONSTRAINT PK_Patron PRIMARY KEY(Id)
/*WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
 ON PRIMARY*/
)ENGINE=InnoDB DEFAULT CHARSET=utf8;



/****** Object:  Table `Queue` ******/

CREATE TABLE Queue(
	ActivityId SMALLINT UNSIGNED NOT NULL,
	VisitorId SMALLINT UNSIGNED NOT NULL,
	VisitorsInParty SMALLINT UNSIGNED  NULL,
	TimeReservationMade DATETIME NOT NULL,
	ReservationTime DATETIME NULL,
	EstimatedTime DATETIME NULL,
	ActualTime DATETIME NULL,
	CancelTime DATETIME NULL,
	GroupVisitorId DATETIME NULL,
	LastUpdate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	LastNotification DATETIME NULL
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


/****** Object:Table `RestrictionGroup`******/

CREATE TABLE RestrictionGroup(
	Id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
	VenueId SMALLINT UNSIGNED NOT NULL,
	RGname VARCHAR(50) NOT NULL,
	MinAge SMALLINT UNSIGNED NULL,
	MinHeight SMALLINT UNSIGNED NULL,
	MaxHeight SMALLINT UNSIGNED NULL,
	MinWeight SMALLINT UNSIGNED NULL,
	MaxWeight SMALLINT UNSIGNED NULL,
	OtherRestrictions VARCHAR(1000) NULL,
	Disclaimer VARCHAR(1000) NULL,
	Waiver VARCHAR(1000) NULL,
 CONSTRAINT PK_RestrictionGroup PRIMARY KEY (Id)
/*WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, 
IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, 
ALLOW_PAGE_LOCKS = ON*/)ENGINE=InnoDB DEFAULT CHARSET=utf8;



/****** Object: Table `ScheduleDate` ******/

CREATE TABLE ScheduleDate(
	Stype SMALLINT UNSIGNED NOT NULL,
	Id SMALLINT UNSIGNED NOT NULL,
	CalendarDate DATETIME NULL,
	FirstEventStart DATETIME NULL,
	LastEventStart DATETIME NULL,
	Closed SMALLINT UNSIGNED NULL
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


/****** Object: Table `ScheduleDay` ******/

CREATE TABLE ScheduleDay(
	SDtype SMALLINT UNSIGNED NOT NULL,
	Id SMALLINT UNSIGNED NOT NULL,
	DayOfWeek SMALLINT UNSIGNED NOT NULL,
	FirstEventStart DATETIME NULL,
	LastEventStart DATETIME NULL,
	Closed SMALLINT UNSIGNED NULL
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


/****** Object:  Table `ScheduleGroup` ******/

CREATE TABLE ScheduleGroup(
	Id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
	VenueId SMALLINT UNSIGNED NOT NULL,
	SGname VARCHAR(50) NOT NULL,
 CONSTRAINT PK_ScheduleGroup PRIMARY KEY (Id)
/*WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, 
IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, 
ALLOW_PAGE_LOCKS = ON)*/
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


/****** Object:  Table `Venue` ******/

CREATE TABLE Venue(
	Id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
	Vname VARCHAR(50) NOT NULL,
	MaxQueuesPerGuest SMALLINT UNSIGNED NOT NULL,
	RestrictionsAckRequired SMALLINT UNSIGNED NULL,
	DisclaimerAckRequired SMALLINT UNSIGNED NULL,
	WaiverAckRequired SMALLINT UNSIGNED NULL,
	MaxWaitPerActivity DATETIME NULL,
	Metric SMALLINT UNSIGNED NULL,
 CONSTRAINT PK_Venue PRIMARY KEY (Id)
/*WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, 
IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, 
ALLOW_PAGE_LOCKS = ON)*/
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


/****** Object: Table `Visitor` ******/

CREATE TABLE Visitor(
	`Id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
	`PatronId` SMALLINT UNSIGNED NOT NULL,
	`ContactPhone` VARCHAR(50) NOT NULL,
	`ContactEmail` VARCHAR(50) NOT NULL,
	`ContactOther` VARCHAR(50)  NULL,
	`ContactMethod` SMALLINT UNSIGNED NULL,
	`TimeIn` DATETIME NOT NULL,
	`TimeOut` DATETIME  NULL,
	`GroupLeader` SMALLINT UNSIGNED NULL,
	`VisitorsInParty` SMALLINT UNSIGNED NULL,
 CONSTRAINT PK_Visitor PRIMARY KEY (Id)
/*WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, 
IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, 
ALLOW_PAGE_LOCKS = ON)*/
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
